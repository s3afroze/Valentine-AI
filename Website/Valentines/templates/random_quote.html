{% extends "layout.html" %}
{% block content %} 
<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Valentine-AI</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/random_quote.css') }}">

</head>
<body>
<!-- partial:index.partial.html -->
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Quote Generated by AI</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/random_quote.css') }}">

	<link href='https://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'>
	<script src="jquery-1.11.2.min.js" type="text/javascript"></script>
</head>
<body>
	<div id="quote-container">
		<h2>Get an AI Generated Quote</h2>
		<br>
			<div id="quoteContainer">
				<p></p>
				<p id="quoteGenius"></p>			
			</div><!--end quoteContainer-->
			
			<br>
			<br>
			<div id="buttonContainer">
				<a href="#" id="quoteButton">Generate</a>
				<a class="rere" id="quoteButton">SMS Quote</a>
		</div><!--end buttonContainer-->


	</div><!--end container-->
</body>
</html>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script  src="{{ url_for('static', filename='js/random_quote.js') }}"></script>
    <script type="text/javascript">

    var quotes_generated = [];

    

    // document.getElementById("quoteButton").setAttribute("href","{{ url_for('submission_form', quotes_dump=last_element) }}");

 //    var a = document.getElementById('quoteButton'); //or grab it by tagname etc
	// a.href = "{{ url_for('submission_form', quotes_dump=last_element) }}"
	function myFunction() {
		var last_element = quotes_generated[quotes_generated.length - 1];
  		return last_element;  
	}
	
	$("#quoteButton.rere").on('click', function(event) {
    	window.location = "https://www.valentine-ai.com/submission_form/"+ myFunction();
	});


    $(document).ready(function(){

		var quoteSource = {{ quotes_dump|safe }} 

		$('#quoteButton').click(function(evt){
			//define the containers of the info we target
			var quote = $('#quoteContainer p').text();
			var quoteGenius = $('#quoteGenius').text();
			//prevent browser's default action
			evt.preventDefault();
			//getting a new random number to attach to a quote and setting a limit
			var sourceLength = quoteSource.length;
			var randomNumber= Math.floor(Math.random()*sourceLength);
			//set a new quote
			for(i=0;i<=sourceLength;i+=1){
			var newQuoteText = quoteSource[randomNumber];
			quotes_generated.push(newQuoteText);
			// var newQuoteGenius = quoteSource[randomNumber].name;
			//console.log(newQuoteText,newQuoteGenius);
      var timeAnimation = 500;
      var quoteContainer = $('#quoteContainer');
      //fade out animation with callback
      quoteContainer.fadeOut(timeAnimation, function(){
        quoteContainer.html('');
				quoteContainer.append('<p>'+newQuoteText+'</p>'+'<p id="quoteGenius">'+'-								'+'Valentine-AI'+'</p>');
        //fadein animation.
        quoteContainer.fadeIn(timeAnimation);
      });  
      	// console.log(quote)
			break;
		};//end for loop
	
	});//end quoteButton function
		
		
});//end document ready

	</script>
    

</body>
</html>
{% endblock content %}
